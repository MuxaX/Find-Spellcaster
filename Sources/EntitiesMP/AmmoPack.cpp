/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 2 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"

#include "StdH.h"
#include "Models/Items/ItemHolder/ItemHolder.h"

#include <EntitiesMP/AmmoPack.h>
#include <EntitiesMP/AmmoPack_tables.h>
CEntityEvent *EAmmoPackItem::MakeCopy(void) { CEntityEvent *peeCopy = new EAmmoPackItem(*this); return peeCopy;}
EAmmoPackItem::EAmmoPackItem() : CEntityEvent(EVENTCODE_EAmmoPackItem) {;
 ClearToDefault(iPistol);
 ClearToDefault(iSMG);
 ClearToDefault(iShells);
 ClearToDefault(iBullets);
 ClearToDefault(iRockets);
 ClearToDefault(iGrenades);
 ClearToDefault(iNapalm);
 ClearToDefault(iElectricity);
 ClearToDefault(iIronBalls);
 ClearToDefault(iSniperBullets);
};
void CAmmoPack::SetDefaultProperties(void) {
  m_aptPackType = APT_CUSTOM ;
  m_iPistol = MAX_PISTOL ;
  m_iSMG = MAX_SMG ;
  m_iShells = MAX_SHELLS ;
  m_iBullets = MAX_BULLETS ;
  m_iRockets = MAX_ROCKETS ;
  m_iGrenades = MAX_GRENADES ;
  m_iNapalm = MAX_NAPALM ;
  m_iElectricity = MAX_ELECTRICITY ;
  m_iIronBalls = MAX_IRONBALLS ;
  m_iSniperBullets = MAX_SNIPERBULLETS ;
  CItem::SetDefaultProperties();
}
  
#line 68 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
void CAmmoPack::Precache(void) {
#line 69 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
PrecacheSound  (SOUND_PICK );
#line 70 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
  
#line 86 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
BOOL CAmmoPack::FillEntityStatistics(EntityStats * pes) 
#line 87 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
{
#line 88 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
pes  -> es_ctCount  = 1;
#line 89 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
pes  -> es_ctAmmount  = 1;
#line 95 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
pes  -> es_strName  . PrintF  ("Back pack: %d Pistols, %d SMG, %d Shells, %d Bullets, %d Rockets, %d Grenades, %d Napalm, %d Electricity, %d Iron balls, %d Sniper bullets" , 
#line 96 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iPistol  , m_iShells  , m_iBullets  , m_iRockets  , m_iGrenades  , m_iNapalm  , m_iElectricity  , m_iIronBalls  , m_iSniperBullets );
#line 99 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
pes  -> es_fValue  = 
#line 100 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iPistol  * AV_PISTOL  + 
#line 101 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iSMG  * AV_SMG  + 
#line 102 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iShells  * AV_SHELLS  + 
#line 103 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iBullets  * AV_BULLETS  + 
#line 104 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iRockets  * AV_ROCKETS  + 
#line 105 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iGrenades  * AV_GRENADES  + 
#line 106 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iNapalm  * AV_NAPALM  + 
#line 107 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iElectricity  * AV_ELECTRICITY  + 
#line 108 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iIronBalls  * AV_IRONBALLS  + 
#line 109 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iSniperBullets  * AV_SNIPERBULLETS 
#line 110 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
;
#line 112 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
pes  -> es_iScore  = 0;
#line 113 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
return TRUE ;
#line 114 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
  
#line 117 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
void CAmmoPack::SetProperties(void) 
#line 118 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
{
#line 119 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
switch(m_aptPackType )
#line 120 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
{
#line 121 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
case APT_SERIOUS : 
#line 122 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_strDescription  = "Serious:";
#line 124 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
AddItem  (MODEL_SERIOUSPACK  , TEXTURE_SERIOUSPACK  , 0 , 0 , 0);
#line 125 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
AddFlare  (MODEL_FLARE  , TEXTURE_FLARE  , FLOAT3D (0 , 0.75f , 0) , FLOAT3D (2 , 2 , 1.3f));
#line 126 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
StretchItem  (FLOAT3D (0.5f , 0.5f , 0.5f));
#line 127 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
break ;
#line 128 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
case APT_CUSTOM : 
#line 129 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_strDescription  = "Custom:";
#line 131 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
AddItem  (MODEL_BACKPACK  , TEXTURE_BACKPACK  , 0 , 0 , 0);
#line 132 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
AddFlare  (MODEL_FLARE  , TEXTURE_FLARE  , FLOAT3D (0 , 0.75f , 0) , FLOAT3D (2 , 2 , 1.3f));
#line 133 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
StretchItem  (FLOAT3D (0.5f , 0.5f , 0.5f));
#line 134 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
break ;
#line 135 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
default  : ASSERTALWAYS  ("Uknown ammo");
#line 136 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
#line 138 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_fValue  = 1.0f;
#line 139 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_fRespawnTime  = (m_fCustomRespawnTime  > 0) ? m_fCustomRespawnTime  : 30.0f;
#line 140 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iPistol  != 0){m_strDescription  . PrintF  ("%s: Pistols (%d)" , m_strDescription  , m_iPistol );}
#line 141 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iSMG  != 0){m_strDescription  . PrintF  ("%s: SMG (%d)" , m_strDescription  , m_iSMG );}
#line 142 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iShells  != 0){m_strDescription  . PrintF  ("%s: Shells (%d)" , m_strDescription  , m_iShells );}
#line 143 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iBullets  != 0){m_strDescription  . PrintF  ("%s: Bullets (%d)" , m_strDescription  , m_iBullets );}
#line 144 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iRockets  != 0){m_strDescription  . PrintF  ("%s: Rockets (%d)" , m_strDescription  , m_iRockets );}
#line 145 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iGrenades  != 0){m_strDescription  . PrintF  ("%s: Grenades (%d)" , m_strDescription  , m_iGrenades );}
#line 146 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iNapalm  != 0){m_strDescription  . PrintF  ("%s: Napalm (%d)" , m_strDescription  , m_iNapalm );}
#line 147 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iElectricity  != 0){m_strDescription  . PrintF  ("%s: Electricity (%d)" , m_strDescription  , m_iElectricity );}
#line 148 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iIronBalls  != 0){m_strDescription  . PrintF  ("%s: Iron balls (%d)" , m_strDescription  , m_iIronBalls );}
#line 150 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(m_iSniperBullets  != 0){m_strDescription  . PrintF  ("%s: Sniper bullets (%d)" , m_strDescription  , m_iSniperBullets );}
#line 151 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
  
#line 153 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
void CAmmoPack::AdjustDifficulty(void) 
#line 154 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
{
#line 157 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(GetSP  () -> sp_bInfiniteAmmo  && m_penTarget  == NULL ){
#line 158 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
Destroy  ();
#line 159 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
#line 160 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
BOOL CAmmoPack::
#line 163 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
ItemCollected(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CAmmoPack_ItemCollected
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EPass, "CAmmoPack::ItemCollected expects 'EPass' as input!");  const EPass &epass = (const EPass &)__eeInput;
#line 165 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
ASSERT  (epass  . penOther  != NULL );
#line 168 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(GetSP  () -> sp_bAmmoStays  && ! (m_bPickupOnce  || m_bRespawn )){
#line 170 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
BOOL bWasPicked  = MarkPickedBy  (epass  . penOther );
#line 171 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(bWasPicked ){
#line 173 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
Return(STATE_CURRENT,EVoid());
#line 173 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
return TRUE;
#line 174 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
#line 175 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
#line 178 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
EAmmoPackItem  eAmmo ;
#line 179 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iPistol  = m_iPistol ;
#line 180 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iSMG  = m_iSMG ;
#line 181 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iShells  = m_iShells ;
#line 182 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iBullets  = m_iBullets ;
#line 183 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iRockets  = m_iRockets ;
#line 184 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iGrenades  = m_iGrenades ;
#line 185 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iNapalm  = m_iNapalm ;
#line 186 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iElectricity  = m_iElectricity ;
#line 187 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iIronBalls  = m_iIronBalls ;
#line 189 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
eAmmo  . iSniperBullets  = m_iSniperBullets ;
#line 191 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(epass  . penOther  -> ReceiveItem  (eAmmo )){
#line 193 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_soPick  . Set3DParameters  (50.0f , 1.0f , 1.0f , 1.0f);
#line 194 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
PlaySound  (m_soPick  , SOUND_PICK  , SOF_3D );
#line 195 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_fPickSoundLen  = GetSoundLength  (SOUND_PICK );
#line 196 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
if(! GetSP  () -> sp_bAmmoStays  || (m_bPickupOnce  || m_bRespawn )){
#line 197 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
Jump(STATE_CURRENT, STATE_CItem_ItemReceived, FALSE, EVoid());return TRUE;
#line 198 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
#line 199 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
}
#line 200 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
Return(STATE_CURRENT,EVoid());
#line 200 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CAmmoPack::
#line 203 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CAmmoPack_Main
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CAmmoPack::Main expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 204 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iPistol  = Clamp  (m_iPistol  , INDEX (0) , MAX_PISTOL );
#line 205 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iSMG  = Clamp  (m_iSMG  , INDEX (0) , MAX_SMG );
#line 206 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iShells  = Clamp  (m_iShells  , INDEX (0) , MAX_SHELLS );
#line 207 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iBullets  = Clamp  (m_iBullets  , INDEX (0) , MAX_BULLETS );
#line 208 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iRockets  = Clamp  (m_iRockets  , INDEX (0) , MAX_ROCKETS );
#line 209 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iGrenades  = Clamp  (m_iGrenades  , INDEX (0) , MAX_GRENADES );
#line 210 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iNapalm  = Clamp  (m_iNapalm  , INDEX (0) , MAX_NAPALM );
#line 211 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iElectricity  = Clamp  (m_iElectricity  , INDEX (0) , MAX_ELECTRICITY );
#line 212 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iIronBalls  = Clamp  (m_iIronBalls  , INDEX (0) , MAX_IRONBALLS );
#line 214 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
m_iSniperBullets  = Clamp  (m_iSniperBullets  , INDEX (0) , MAX_SNIPERBULLETS );
#line 216 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
Initialize  ();
#line 218 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
ForceCollisionBoxIndexChange  (ITEMHOLDER_COLLISION_BOX_MEDIUM );
#line 219 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
SetProperties  ();
#line 221 "V:/Programs/SamSDK/Sources/EntitiesMP/AmmoPack.es"
Jump(STATE_CURRENT, STATE_CItem_ItemLoop, FALSE, EVoid());return TRUE; ASSERT(FALSE); return TRUE;};